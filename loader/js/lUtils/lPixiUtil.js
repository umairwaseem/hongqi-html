function lPixiBtn(c,d){c.buttonMode=true;c.interactive=true;c.on("mouseup",e);c.on("touchend",e);c.on("mousedown",b);c.on("touchstart",b);var a={x:0,y:0,onStart:false};function b(f){a.x=f.data.global.x;a.y=f.data.global.y;a.onStart=true}function e(f){if(a.onStart==true){if(Math.abs(f.data.global.x-a.x)+Math.abs(f.data.global.y-a.y)<=50){if(d!=undefined){d(f)}}}a.onStart=false}c.lActive=function(){c.buttonMode=true;c.interactive=true};c.lDeactive=function(){c.buttonMode=false;c.interactive=false}}var lPixiLoader={};lPixiLoader.imgTotal=0;lPixiLoader.imgLoaded=0;lPixiLoader.loadP=0;lPixiLoader.onPUpdate=function(){lPixiLoader.loadP=lPixiLoader.imgLoaded/lPixiLoader.imgTotal;if(lPixiLoader.onProgress!=undefined){lPixiLoader.onProgress(lPixiLoader.loadP)}};function lPixiSetCenter(c,b,a){c.pivot.x=c.ow*b;c.pivot.y=c.oh*a;c.x+=c.ow*b;c.y+=c.oh*a}function lPixiContainer(e,a,f,b,d){var c=new PIXI.Container();c.ow=b;c.oh=d;if(e!=undefined){e.addChild(c)}if(a!=undefined){c.x=a}if(f!=undefined){c.y=f}if(b!=undefined){c.width=b}if(d!=undefined){c.height=d}return c}function lPixiTexture(a,b,g,e,i,d){var f=String(a).split("/").pop();var c=PIXI.utils.TextureCache[f];if(c!=undefined){var j=new PIXI.Sprite(c)}else{var j=PIXI.Sprite.fromImage(a)}j.ow=i;j.oh=d;lPixiLoader.imgTotal+=1;j.texture.baseTexture.on("loaded",function(){lPixiLoader.imgLoaded+=1;lPixiLoader.onPUpdate()});if(b!=undefined){b.addChild(j)}if(g!=undefined){j.x=g}if(e!=undefined){j.y=e}return j}function lPixiGraphics(c,a,d){var b=new PIXI.Graphics();if(c!=undefined){c.addChild(b)}if(a!=undefined){b.x=a}if(d!=undefined){b.y=d}return b}function lPixiInserBefore(a,b){var c=a.parent;c.addChildAt(a,c.getChildIndex(b))}function lPixiInserAfter(a,b){var c=a.parent;c.addChildAt(a,c.getChildIndex(b)+1)}function lPixiText(g,f,b,h,e,c,a){if(a==undefined){a="Microsoft YaHei,Arial"}var d=new PIXI.Text(g,{fontSize:e+"px",fill:c,fontFamily:a});f.addChild(d);d.x=b;d.y=h;return d}function lPixiVideo(h,g,d){d=lInitOption(d);d.appP("pOffset",1);var c=lAudio(g,false,false);var f={};var k;var i;var j=0;var a=h.totalFrames-1;var b=lEnterFrame(function(){if(isNaN(c.duration)==false){k=(c.currentTime)/(c.duration);k*=d.pOffset;k=Math.min(1,k);i=parseInt(k*a);if(i!=j){h.gotoAndStop(i);j=i}if(d.onUpdate!=undefined){d.onUpdate(k)}}});c.addEventListener("play",function(){b.start();if(d.onPlay!=undefined){d.onPlay()}});c.addEventListener("ended",function(){b.stop();if(d.onComplete!=undefined){d.onComplete()}});c.addEventListener("pause",function(){b.stop();if(d.onPause!=undefined){d.onPause()}});f.isPlay=false;var e=true;c.addEventListener("loadedmetadata",function(){e=true;if(f.isPlay){c.play()}});f.play=function(){f.isPlay=true;if(e){c.play()}};f.restart=function(){f.isPlay=true;c.currentTime=0;if(e){c.play()}};f.stop=function(){f.isPlay=false;c.pause()};f.mc=h;f.audio=c;return f}function lPixiVideoHowler(l,j,f){f=lInitOption(f);f.appP("pOffset",1);var e=new Howl({src:[j],autoplay:false,loop:false,volume:1,onplay:a,onend:o,onpause:k,onload:b});var h;var i={};var p;var n;var m=0;var c=l.totalFrames-1;console.log(l.totalFrames,"mc.totalFrames");var d=lEnterFrame(function(){if(isNaN(h)==false){p=(e.seek())/(h);n=parseInt(p*c);if(n!=m){if(f.onEf!=undefined){f.onEf(e.seek(),p)}l.gotoAndStop(n);m=n}}});function a(){d.start();if(f.onPlay!=undefined){f.onPlay()}}function k(){d.stop();if(f.onPause!=undefined){f.onPause()}}function o(){d.stop();i.isPlay=false;if(f.onComplete!=undefined){f.onComplete()}if(f.onEnd!=undefined){f.onEnd()}}i.isPlay=false;var g=true;function b(){h=e.duration();g=true;if(i.isPlay){e.play()}i.duration=h}i.play=function(){if(i.isPlay==false){i.isPlay=true;if(g){e.play()}}};i.restart=function(){e.stop();i.isPlay=true;e.seek(0);if(g){e.play()}};i.stop=function(){i.isPlay=false;e.stop()};i.pause=function(){i.isPlay=false;e.pause()};i.seek=function(q){p=q/(h);n=parseInt(p*c);l.gotoAndStop(n);e.seek(q)};i.mc=l;i.audio=e;return i}function lBinMc(b,d,k,c,h,g,e){if(e==undefined){e="png"}if(k==undefined){k=5}if(c==undefined){c=0}if(h==undefined){h=100}if(g==undefined){g=3}var f=c%g;var a=[];for(var j=c;j<h+1;j++){if(j%g==f){a.push(PIXI.Texture.fromFrame(b+lPad(j,k)+"."+e))}}var m=new PIXI.extras.MovieClip(a);d.addChild(m);return m}function lPixiFrame(a){var c={};var b=lCountNum(a.length,true,d);c.tArr=a;c.curId=0;TweenMax.to(a,0,{visible:false});TweenMax.to(a[0],0,{visible:true});c.next=function(){b.next()};c.prev=function(){b.prev()};c.gotoPage=function(e){if(e==-1){TweenMax.to(a[c.curId],0,{visible:false})}else{TweenMax.to(a[c.curId],0,{visible:true});b.setCurId(e)}};function d(e){c.curId=e;TweenMax.to(a[b.lastId],0,{visible:false});TweenMax.to(a[e],0,{visible:true})}return c}function lPixiFrameTl(e,d,a,f){if(d==undefined){d=0.1}if(f==undefined){f={}}if(a==undefined||a==true){a=-1}else{a=-0}var c={};c.arr=e;TweenMax.to(e,0,{pixi:{autoAlpha:0}});c.tl=new TimelineMax({repeat:a,paused:true,onComplete:f.onComplete,onStart:f.onStart});for(var b=0;b<c.arr.length;b++){if(e[b-1]!=undefined){c.tl.to(e[b-1],0,{pixi:{autoAlpha:0}})}c.tl.to(e[b],0,{pixi:{autoAlpha:1}});c.tl.to(c,d,{})}c.tl.render(0);c.tl.arr=c.arr;return c.tl};
